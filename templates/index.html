<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Goldfish AI Lab – Size & Count</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
  <div class="layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="brand">
        <!-- Ikon ikan abstrak (SVG sederhana, semi-tech) -->
        <div class="brand-logo">
          <svg viewBox="0 0 64 64" aria-hidden="true">
            <defs>
              <linearGradient id="fishGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" stop-color="#38bdf8"/>
                <stop offset="50%" stop-color="#6366f1"/>
                <stop offset="100%" stop-color="#a855f7"/>
              </linearGradient>
            </defs>
            <path d="M10 32c8-7 16-11 26-11 5 0 9 1 13 3l7-6v28l-7-6c-4 2-8 3-13 3-10 0-18-4-26-11z"
                  fill="url(#fishGradient)" />
            <circle cx="22" cy="30" r="2.2" fill="#0f172a"/>
          </svg>
        </div>
        <div class="brand-text">
          <span class="brand-title">Goldfish AI Lab</span>
          <span class="brand-subtitle">YOLOv8 Pose · Size & Count</span>
        </div>
      </div>

      <nav class="nav">
        <button class="nav-item active" data-target="#section-dashboard">Dashboard</button>
        <button class="nav-item" data-target="#section-upload">Upload & Proses</button>
        <button class="nav-item" data-target="#section-result">Hasil Analisis</button>
        <button class="nav-item" data-target="#section-about">About Project</button>
      </nav>

      <div class="sidebar-footer">
        <span class="sidebar-tag">TA 1 · Computer Vision</span>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main">

      <!-- DASHBOARD INTRO -->
      <section id="section-dashboard" class="section">
        <header class="header">
          <h1>Goldfish Size & Count Dashboard</h1>
          <p>
            Laboratorium mini untuk menguji model YOLOv8 Pose pada ikan mas di akuarium.
            Unggah video uji, jalankan inferensi, lalu amati estimasi panjang dan jumlah ikan secara otomatis.
          </p>
        </header>

        <div class="grid-2">
          <div class="card highlight-card">
            <h2>Snapshot Sistem</h2>
            <ul class="highlight-list">
              <li><span>Model</span><strong>YOLOv8 Pose (Ultralytics 8.0.196)</strong></li>
              <li><span>Metode</span><strong>Head–Tail Keypoints + Norfair Tracking</strong></li>
              <li><span>Lingkungan</span><strong>Flask Web · Local Inference</strong></li>
              <li><span>Skala Uji</span><strong>Akuarium kecil · Beberapa ekor ikan mas</strong></li>
            </ul>
          </div>

          <div class="card info-card">
            <h2>Alur Uji Cepat</h2>
            <ol class="steps-list">
              <li>Rekam video ikan mas dari atas (top view) di akuarium uji.</li>
              <li>Unggah berkas video pada menu <strong>Upload & Proses</strong>.</li>
              <li>Tunggu hingga pemrosesan selesai (model akan berjalan lokal).</li>
              <li>Lihat video anotasi dan unduh CSV ringkasan panjang ikan per ID.</li>
            </ol>
          </div>
        </div>
      </section>

      <!-- UPLOAD & PROCESS -->
      <section id="section-upload" class="section">
        <div class="card">
          <div class="card-header-inline">
            <div>
              <h2>Upload & Proses Video</h2>
              <p class="card-subtitle">
                Unggah satu video uji (MP4/AVI). Sistem akan menjalankan deteksi pose, menghitung panjang,
                dan melacak setiap ikan sebagai satu ID unik.
              </p>
            </div>
          </div>

          <form id="upload-form" class="upload-form">
            <div class="form-group">
              <label for="video">Pilih berkas video uji</label>
              <input type="file" id="video" name="video" accept="video/*" required />
              <p class="input-hint">
                Rekomendasi: durasi pendek (10–30 detik), resolusi sedang, top-view akuarium.
              </p>
            </div>

            <button type="submit" class="btn-primary" id="btn-submit">
              Jalankan Analisis
            </button>
          </form>

          <div id="status" class="status hidden"></div>
        </div>
      </section>

      <!-- RESULTS -->
      <section id="section-result" class="section">
        <div id="result-section" class="card hidden">
          <div class="card-header-inline">
            <div>
              <h2>Hasil Analisis Terbaru</h2>
              <p class="card-subtitle">
                Ringkasan statistik dan artefak hasil pemrosesan untuk satu sesi video uji.
              </p>
            </div>
          </div>

          <div class="grid-2">
            <div class="summary-card">
              <h3>Ringkasan Run</h3>
              <ul id="summary-list" class="summary-list"></ul>
            </div>

            <div class="artifact-card">
              <h3>Artefak Output</h3>
              <div class="artifact-block">
                <span class="artifact-label">Video Anotasi</span>
                <video id="result-video" controls></video>
              </div>

              <div class="artifact-block">
                <span class="artifact-label">Ringkasan CSV</span>
                <a id="csv-link" href="#" target="_blank" class="btn-secondary">
                  Unduh CSV
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ABOUT PROJECT -->
      <section id="section-about" class="section">
        <div class="card">
          <h2>About This Project</h2>
          <p class="about-text">
            Aplikasi ini dikembangkan sebagai bagian dari Tugas Akhir yang berfokus pada
            <strong>estimasi panjang</strong> dan <strong>perhitungan jumlah ikan mas</strong> secara otomatis
            menggunakan pendekatan computer vision.
          </p>
          <p class="about-text">
            Sistem memanfaatkan model <strong>YOLOv8 Pose</strong> untuk mendeteksi titik kepala dan ekor
            setiap ikan, kemudian menghitung panjang dalam satuan sentimeter berdasarkan faktor kalibrasi
            piksel-ke-cm. <strong>Norfair Tracking</strong> digunakan untuk mempertahankan identitas ikan
            antar-frame sehingga analisis statistik per-ID dapat dilakukan.
          </p>
          <p class="about-text">
            Website ini ditujukan sebagai <em>laboratorium uji</em> berskala kecil di lingkungan akuarium,
            sehingga konfigurasi dan antarmuka dibuat sesederhana mungkin namun tetap menyerupai
            dashboard profesional.
          </p>
        </div>
      </section>

      <footer class="footer">
        Goldfish AI Lab · Size & Count · YOLOv8 Pose · Flask Local Dashboard
      </footer>

    </main>
  </div>

  <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
